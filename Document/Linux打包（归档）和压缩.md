# Linux打包（归档）和压缩

[TOC]

打包指的是将多个文件和目录集中存储在一个文件中；而压缩则指的是利用算法对文件进行处理，从而达到缩减占用磁盘空间的目的。

**归档，也称为打包，指的是一个文件或目录的集合，而这个集合被存储在一个文件中。**它占用的空间是其中所有文件和目录的总和。

压缩文件也是一个文件和目录的集合，且这个集合也被存储在一个文件中，压缩文件采用了不同的存储方式，使其所占用的磁盘空间比集合中所有文件大小的总和要小。

压缩是指**利用算法**将文件进行处理，已达到保留最大文件信息，而让文件体积变小的目的。（建立词典文件）

压缩又可以分为**有损压缩**和**无损压缩**。

采用压缩工具对文件进行压缩，生成的文件称为**压缩包**。压缩包中的数据无法直接使用，使用前需要利用压缩工具将文件数据还原，此过程又称**解压缩**。

### tar打包命令

Linux 系统中，**最常用的归档（打包）命令**就是 tar，该命令可以将许多文件一起保存到一个单独的磁带或磁盘中进行归档。不仅如此，该命令还可以从归档文件中**还原所需文件**，也就是打包的反过程，称为**解打包**。

使用 tar 命令归档的包通常称为 tar 包（tar 包文件都是以**“.tar”结尾**的）。

#### tar命令做打包操作

**基本格式：tar [选项] 源文件或目录**

tar 打包命令常用选项及含义：

| 选项    | 含义                                                         |
| ------- | ------------------------------------------------------------ |
| -c      | 将多个文件或目录进行打包。                                   |
| -A      | 追加 tar 文件到归档文件。                                    |
| -f 包名 | 指定包的文件名。包的扩展名是用来给管理员识别格式的，所以一定要正确指定扩展名。 |
| -v      | 显示打包文件过程。                                           |

在使用 tar 命令指定选项时可以不在选项前面输入“-”。

选项 "-cvf" 一般是习惯用法，记住打包时需要指定打包之后的文件名，而且要用 ".tar" 作为扩展名。

#### tar命令做解打包操作

**基本格式：tar [选项] 压缩包**

tar 解打包常用选项及含义：

| 选项    | 含义                                                       |
| ------- | ---------------------------------------------------------- |
| -x      | 对 tar 包做解打包操作。                                    |
| -f      | 指定要解压的 tar 包的包名。                                |
| -t      | 只查看 tar 包中有哪些文件或目录，不对 tar 包做解打包操作。 |
| -C 目录 | 指定解打包位置。                                           |
| -v      | 显示解打包的具体过程。                                     |

**解打包和打包相比，只是把打包选项 "-cvf" 更换为 "-xvf"。**

查看文件包中有哪些文件，则可以**把解打包选项 "-x" 更换为测试选项 "-t"**。

#### tar命令做打包压缩（解压缩解打包）操作

**基本格式：tar [选项] 压缩包 源文件或目录**

常用的选项：

- -z：压缩和解压缩 ".tar.gz" 格式。
- -j：压缩和解压缩 ".tar.bz2"格式。

**打包压缩为".tar.gz"格式，通过"-z"来识别格式，"-cvf"和打包选项一致**

解压缩也只是在解打包选项 "-xvf" 前面**加了一个 "-z" 选项**。

把文件直接压缩成".tar.gz"和".tar.bz2"格式，才是 Linux 中最常用的压缩方式。

利用 tar 命令可以把一大堆的文件和目录打包成一个文件，这对于**备份文件**或是将几个文件组合成为一个文件进行**网络传输**是非常有用的。

### zip命令：压缩文件或目录

**基本格式：zip \[选项\] 压缩包名 源文件或源目录列表**

zip 命令常用选项及含义：

| 选项      | 含义                                                         |
| --------- | ------------------------------------------------------------ |
| -r        | 递归压缩目录，及将制定目录下的所有文件以及子目录全部压缩     |
| -m        | 将文件压缩之后，删除原始文件，相当于把文件移到压缩文件中     |
| -v        | 显示详细的压缩过程信息                                       |
| -q        | 在压缩的时候不显示命令的执行过程                             |
| -压缩级别 | 压缩级别是从 1~9 的数字，-1 代表压缩速度更快，-9 代表压缩效果更好 |
| -u        | 更新压缩文件，即往压缩文件中添加新文件                       |

### unzip命令：解压zip文件

unzip 命令可以查看和解压缩 zip 文件。

**基本格式：unzip [选项] 压缩包名**

unzip 命令常用选项及含义：

| 选项        | 含义                                                         |
| ----------- | ------------------------------------------------------------ |
| -d 目录名   | 将压缩文件解压到指定目录下                                   |
| -n          | 解压时并不覆盖已经存在的文件                                 |
| -o          | 解压时覆盖已经存在的文件，并且无需用户确认                   |
| -v          | 查看压缩文件的详细信息，包括压缩文件中包含的文件大小、文件名以及压缩比等，但并不做解压操作 |
| -t          | 测试压缩文件有无损坏，但并不解压                             |
| -x 文件列表 | 解压文件，但不包含文件列表中指定的文件                       |

### gzip命令：压缩文件或目录中文件

gzip 是 Linux 系统中经常用来对文件进行压缩和解压缩的命令，通过此命令压缩得到的新文件，其扩展名通常标记为“.gz”。

**gzip 命令只能用来压缩文件，不能压缩目录，即便指定了目录，也只能压缩目录内的所有文件。**

**基本格式：gzip [选项] 源文件**

命令中的源文件，当进行压缩操作时，指的是普通文件；当进行解压缩操作时，指的是压缩文件。

gzip 命令常用选项及含义：

| 选项  | 含义                                                         |
| ----- | ------------------------------------------------------------ |
| -c    | 将压缩数据输出到标准输出中，并保留源文件                     |
| -d    | 对压缩文件进行解压缩                                         |
| -r    | 递归压缩指定目录下以及子目录下的所有文件                     |
| -v    | 对于每个压缩和解压缩的文件，显示相应的文件名和压缩比         |
| -l    | 对每一个压缩文件，显示以下字段：<br>压缩文件的大小<br>未压缩文件的大小<br>压缩比<br>未压缩文件的名称 |
| -数字 | 用于指定压缩等级，-1 压缩等级最低，压缩比最差；-9 压缩比最高。默认压缩比是 -6 |

**在使用 gzip 命令压缩文件时，源文件会消失，从而生成压缩文件。**

保留源文件压缩：使用-c选项，但是不让压缩数据输出到屏幕上，而是重定向到压缩文件中，这样可以缩文件的同时不删除源文件。

在 Linux 中，**打包和压缩是分开处理的**。而 gzip 命令**只会压缩，不能打包**，所以才会出现没有打包目录，而只把目录下的文件进行压缩的情况。

### gunzip命令：解压缩文件

gunzip 是一个使用广泛的解压缩命令，它用于解压被 gzip 压缩过的文件（扩展名为 .gz）。

**对于解压被 gzip 压缩过的文件，还可以使用 gzip 自己，即 gzip -d 压缩包。**

**基本格式：gunzip \[选项\] 文件**

gunzip 命令常用选项及含义：

| 选项 | 含义                                             |
| ---- | ------------------------------------------------ |
| -r   | 递归处理，解压缩指定目录下以及子目录下的所有文件 |
| -c   | 把解压缩后的文件输出到标准输出设备               |
| -f   | **强制解压缩文件**，不理会文件是否已存在等情况   |
| -l   | 列出压缩文件内容                                 |
| -v   | 显示命令执行过程                                 |
| -t   | 测试压缩文件是否正常，但不对其做解压缩操作       |

### bzip2命令：压缩文件（.bz2格式）

bzip2 命令同 gzip 命令类似，**只能对文件进行压缩（或解压缩）**，对于目录只能压缩（或解压缩）该目录及子目录下的所有文件。当执行压缩任务完成后，会生成一个以“.bz2”为后缀的压缩包。

".bz2"格式是 Linux 的另一种压缩格式，从理论上来讲，".bz2"格式的算法**更先进、压缩比更好**；而 ".gz"格式相对来讲的时间更快。

**基本格式：bzip2 [选项] 源文件**

| 选项  | 含义                                                         |
| ----- | ------------------------------------------------------------ |
| -d    | 执行解压缩，此时该选项后的源文件应为标记有 .bz2 后缀的压缩包文件 |
| -k    | bzip2 在压缩或解压缩任务完成后，会删除原始文件，若要**保留原始文件**，可使用此选项 |
| -f    | bzip2 在压缩或解压缩时，若输出文件与现有文件同名，默认不会覆盖现有文件，若使用此选项，则会**强制覆盖现有文件** |
| -t    | 测试压缩包文件的完整性                                       |
| -v    | 压缩或解压缩文件时，显示详细信息                             |
| -数字 | 这个参数和 gzip 命令的作用一样，用于指定压缩等级，-1 压缩等级最低，压缩比最差；-9 压缩比最高 |

**注意：gzip 只是不会打包目录，但是如果使用“-r”选项，则可以分别压缩目录下的每个文件；而 bzip2 命令则根本不支持压缩目录，也没有“-r”选项。**

### bunzip2命令：bz2格式的解压缩命令

要解压“.bz2”格式的压缩包文件，除了使用“bzip2 -d 压缩包名”命令外，还可以使用 bunzip2 命令。

**bunzip2 命令只能用于解压文件，即便解压目录，也是解压该目录以及所含子目录下的所有文件。**

**基本格式：bunzip2 [选项] 源文件**

bunzip2 命令选项及含义：

| 选项 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -k   | 解压缩后，默认会删除原来的压缩文件。若要**保留压缩文件**，需使用此参数 |
| -f   | 解压缩时，若输出的文件与现有文件同名时，默认不会覆盖现有的文件。若要**覆盖**，可使用此选项 |
| -v   | 显示命令执行过程                                             |
| -L   | 列出压缩文件内容                                             |

